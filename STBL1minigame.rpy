# ЭКРАН МИНИ-ИГРЫ "КЛИКОВЫЙ ВЫБОР"
# Назначение: Интерактивная мини-игра для сложных выборов в визуальной новелле

screen click_challenge():
    # ОСНОВНАЯ ПЕРЕМЕННАЯ - прогресс заполнения шкалы (от 0.0 до 1.0)
    default progress = 0.1
    
    # ЧЕРНЫЙ ФОН для концентрации внимания
    add Solid("#000000")
    
    # ПРОГРЕСС-БАР - визуальное отображение прогресса
    bar:
        xalign 0.5 yalign 0.5  # Позиция по центру экрана
        xsize 300              # Ширина 300 пикселей
        value progress         # Значение берется из переменной progress
        range 1.0              # Максимальное значение = 1.0 (100%)
    
    # НЕВИДИМАЯ КНОПКА на весь экран для обработки кликов
    button:
        xfill True yfill True  # Занимает всю площадь
        background None        # Прозрачный фон (невидима)
        # При клике: увеличиваем прогресс на 0.1, но не больше 1.0
        action SetScreenVariable("progress", min(1.0, progress + 0.1))
    
    # ТАЙМЕР АВТОМАТИЧЕСКОГО УМЕНЬШЕНИЯ прогресса
    timer 0.1 repeat True action SetScreenVariable("progress", max(0.0, progress - 0.02))
    # Каждые 0.1 секунды прогресс уменьшается на 0.02
    
    # ПРОВЕРКА УСЛОВИЙ ЗАВЕРШЕНИЯ ИГРЫ
    if progress >= 1.0:
        # ПОБЕДА: если прогресс достиг 100%
        timer 0.01 action Return(True)
    elif progress <= 0.0:
        # ПОРАЖЕНИЕ: если прогресс упал до 0%
        timer 0.01 action Return(False)